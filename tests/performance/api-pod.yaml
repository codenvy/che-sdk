apiVersion: batch/v1
kind: Job
metadata:
  labels:
    group: load-tests
  name: REPLACE_NAME
spec:
  completions: REPLACE_COMPLETITIONS
  backoffLimit: 0
  template:
    metadata:
      name: load-tests-template
      labels:
        group: load-tests
    spec:
      volumes:
        - name: dshm
          emptyDir:
            medium: Memory
      containers:
        - name: mycontainer
          env:                                 
            - name: TS_SELENIUM_BASE_URL
              value: REPLACE_URL
            - name: USERSTORY
              value: REPLACE_USERSTORY
            - name: OCP_SERVER_URL
              value: REPLACE_OCP_SERVER_URL    
            - name: BASE_URL
              value: REPLACE_BASE_URL                  
            - name: OCP_USERNAME
              value: REPLACE_USERNAME
            - name: OCP_PASSWORD
              value: REPLACE_PASSWORD
            - name: KUBECONFIG
              value: /tmp/.kube/config
          image: quay.io/openshift/origin-cli
          command: ["/bin/bash"]
          args: ["-c", "curl -sSL https://gist.githubusercontent.com/SkorikSergey/5fa2d7a6875b3dfad031aa8d658babbc/raw/58cb69a42c5027b05c00ff05517f9ee2616dd1fe/start.sh | bash"]
          # args:
          #   - /bin/sleep
          #   - "infinity"
          volumeMounts:
            - name: dshm
              mountPath: /dev/shm
          resources:
            requests:
              cpu: "500m"
              memory: "900Mi"
            limits:
              cpu: "1"
              memory: "1300Mi"
      restartPolicy: Never
